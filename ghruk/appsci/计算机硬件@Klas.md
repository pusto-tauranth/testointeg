*Book 1: 微型计算机原理与接口技术(第3版） ，冯博琴等，清华大学出版社，11/06-3，ISBN:978-7-302-24947-4*

*Book 2: 其实验指导书*

*Time: 大四上*

**HardweaaDCompю**

[TOC]

# 1 微型计算机基础概论

## 1.1 微型计算机系统

**1.1.1 微型计算机の发展**

- 更替：五代
	+ `电子管计算机`('46-'56)
	+ `晶体管计算机`('56-'64)
	+ `集成电路计算机`('65-'70)
	+ `大规模、超大规模集成电路计算机`('71-)
- 进一步发展：巨型化、微型化、网络化、智能化
- 微丶计丶分类，按性能、价格和体积等的综合指标：`巨/大型机`、`中型机`、`小型机`、`微型机`、`单片计算机`
- の发展更替主要指`微处理器`の更新换代。
	+ 微处理器は微型计算机の核心芯片，简称`μP`か`MP(Micro Processor)`。
	+ 将计算机の运算器と控制器集成于一片硅片。亦`中央处理单元`即`CPU(Central Processing Unit)`
	+ 微处理器の发展の重要基础は电子技术的发展。
		* 60年代初，硅平面管工艺と二极管晶体管逻辑电路の发展→ `小规模集成电路`（Small Scale Integration, SSI）
		* `金属氧化物半导体`（Metal Oxide Semiconductor, MOS）工艺又提集成度→ 60代后期に`大规模集成电路` LSI(Large Scale Integration)
		* 现代新型集成电路，单个芯片数亿个晶体管，工作频率超 3GHz
	+ 单核多核
		* 核は核心，`内核`，はCPU最重要な组成部分，由单晶硅以一定生产工艺制造出。执行 CPU 所有の计算、数据处理、接受と存储命令。
		* `多核处理器`：突破主频限制、提高性能，即几个相同な计算内核を集中在一个处理器，使处理器每个时钟周期内执行能力加倍，提高计算能力

**1.1.2 微丶计丶の工作过程**

- _随堂 20180913_：
	+ 字长：数据线一次传输。线宽……
	+ 80386
	+ 8088准16位即外部8位；8086真正な十六位

**...1 冯·诺依曼计算机**

- `指令`：计算机能识别并执行的基本操作命令
	+ `指令系统`：该计算机能够识别的所有指令的集合
- `程序`：实现既定任务な指令序列

- `冯·诺依曼计算机`
	+ の核心原理，即`存储程序`的工作原理：把程序和数据送到具有记忆功能的存储器，计算机工作时只要给首指令地址，控制器便可依据程序中的指令顺序、周而复始取出指令、分析指令、执行指令
	+ の主要特点
		* 计算过程描述为程序，存入**存储器**
		* 程序の指令、数据用**二进制**编码，且可被计算机识别
		* 指令按在存储器中存放的**顺序**执行，存储器字长固定并按顺序线性编址
		* **控制器**控制整个程序存取、执行
		* **运算器**为核心，所有执行皆经过之

**...2 微丶计丶の工作过程**

- 逐条执行指令序列。
	+ 指令序列在存储器
	+ 指令格式：`操作码`、`操作数`（地址码）
	+ 每条指令的执行包括`取指令`（取出指令、指令译码）和`执行指令`（读出操作数（地址码）、执行操作）
		* 取指令：组成于一系列相同な操作，∴时间总相同，谓`公共操作`
		* 执行阶段：不同事件顺序组成，时长不同
- 过程：
	+ 从内存取第一条指令
	+ 送诸`指令译码器``译码`，以确定要进行的操作
	+ 读取相应`操作数`（即执行な对象）
	+ 执行指令
	+ 存放执行结果
	+ 转入下一条の取指令，周而复始，直到遇到暂停指令

```
10110000 00000101	MOV A,5
00000100 00001000	ADD A,8
11110100			HLT
```

- 取上记第一条指令の工作过程：
	+ 指令所在地址（此处 00000000）赋给`程序计数器` PC 并送到`地址寄存器` AR
	+ PC ++
	+ AR 内容 00000000 放在`地址总线` AB，→内存储器，`地址译码器`译码，选中相应的 00000000 单元
	+ CPU の控制器发出读命令
	+ 所选中 00000000 单元の内容即第一条指令の操作码 10110000 を读到`数据总线` DB
	+ 读出な内容 10110000 を经数据总线送到`数据寄存器` DR 
	+ 取指令阶段最后一步は`指令译码`。因为所取为操作码∴DR将其送到`指令寄存器` IR，再送到`指令译码器` ID
- 后续各条读取过程同，但指令译码器 ID 内容不同，因为指令不同

**1.1.3 微机系统の组成**

- `微型计算机`は体积、重量、计算能力皆相对较小な计算机，一般个人使用，又称`个人计算机`（PC）.
- 微机系统、微型机、微处理器は不同な概念，是微型计算机从全局到局部な不同层次
- 微型计算机系统の概念结构：
	+ 软件系统
		* 系统软件
		* 应用软件
	+ 硬件系统
		* 主机
			- CPU
				+ 寄存器组
				+ 控制器
				+ 运算器
			- 存储器
			- 总线
			- I/O 接口
		* 外部设备
- 详细：具体实现上，个组成部分往往合并か分解为若干功能模块，实现以不同部件。
	+ `软件系统`
		* `系统软件`
			- `操作系统（OS）`：以管理计算机资源、任务调度、提供文件管理系统、人机接口，还包含 IO 设备驱动程序
			- `系统实用程序`：各种高级语言的翻译/编译程序、汇编程序、数据库系统、文本编辑程序、诊断和调试程序、系统工具程序等
				+ 程序设计语言
					* `机器语言`：计算机能直接理解执行な二进制
					* `汇编语言`：用助记符语言表示，需“汇编程序”翻译之为机器语言，与机器语言指令基本一一对应，密切关乎硬件
					* `高级语言`：不依赖具体机型，需编译程序か解释程序の翻译
				+ 编写程序还需要な系统程序
					* `系统程序库`：其子程序可附在任何系统程序か用户程序
					* `连接程序`：待执行程序连接程序库、其他已翻译好的程序
					* `装入程序`：待执行程序加载入内存
		* `应用软件`
	+ `硬件系统`
		* `主机`
			- `微处理器`（か`中央处理器`か `CPU`）
				+ `运算器`：核心部件は`算术逻辑单元`（ALU），基础は`加法器`，辅は`移位寄存器`、相应控制逻辑。
				+ `控制器`：一般由`指令寄存器`、`指令译码器`、`操作控制电路`。
				+ `寄存器组`：CPU 内部的若干年存储单元，汇编语言中常按名字访问。
					* `专用寄存器`：作用固定，如堆栈指针、程序计数器、标志寄存器
					* `通用寄存器`：程序员可规定其用途。重复使用な操作数、中间结果可暂存，避免频繁访问存储器。
					* 还有一些不能直接为程序员所用な寄存器，如累加锁存器、暂存器、指令寄存器。仅受内部定时与控制逻辑控制。
			- `存储器`：主机中的又叫`内存`か`主存`，微型计算机の存储と记忆部件，用以存放数据和当前执行的程序。均由半导体材料制成，也称`半导体存储器`。
				+ 内存单元の地址と内容
					* 内存有许多单元，每个单元可存放一组二进制码。
					* 每个内存单元存放一个`字节`（8b）。
					* 微机の`内存容量`：内存单元の总数
					* `内存地址`：以区分不同内存单元，属于每个存储单元
					* 内存单元的内容：其中存放な信息
				+ 内存の操作：CPU 对内存的操作有`读`、`写`。
					* `非破坏性读出`特性，读操作不改内容。允许多次读同一备份。
				+ 内存の分类，按工作方式不同
					* `随机存取存储器 RAM` か`读写存储器`：可被 CPU 随机读写。
					* `只读存储器 ROM`：不能由 CPU 任意写入，内容由生产厂家或用户使用专用设备写入固化。存放监控程序、基本输入输出程序、常用な数据と表格。
			- 总线：一组导线和相关控制单路组成，是各种公共信号线の集合。
				+ は信息传递の公共通道，各组成部分以之连接。
				+ `总线结构形式`:所有の微型机系统都采用了。优点は设计简单、灵活性好、可扩展性优、便于故障检测と维修。
				+ 分类，按用途
					* `内部总线`：主机内部信息传递
					* `外部总线`：连接主机和外部设备
				+ 分类，按传送信息の类型
					* 地址总线 AB，读/写 RAM/ROMか读/写 I/O 接口の地址信息を。单向。
					* 数据总线 DB，操作的数据を。双向。
					* 控制总线 CB，控制信号、时序信号、状态信息を。每一根线单向，整体功能双向。
			- `I/O 接口`と`输入输出设备`：`I/O 系统`の硬件组成。
				+ IO 设备工作速度较 CPU 低，处理信息の数据格式、逻辑时序一般不可与计算机直接兼容。以是有 I/O 接口，又称 `I/O 适配器`。
		* 外部设备


## 1.2 计算机中的数制及编码

**1.2.1 常用记数制**

- D, B, H
	+ 1 位十六进制与 4 位二进制有唯一对应关系，故常表达以前者
- 基数、位权（位の权重）
- 任一进位制数の`权展开式`：$(S)_k = \sum\limits_{i=-m}^{n-1} S_{i} \times K^{i}$
	+ 基数$K$，位权$i$
	+ 第 $i$ 位的数码 $S_i$

**1.2.2 各种数制之间的转换**

- 非十 → 十：权表达式展开，按十进制运算规则
- 十 →
	+ → 二：整数`除二取余`至商为0，小数`乘二取整`至达到精度或小数0，均先得な数靠近小数点
	+ → 十六：可类似于二，亦可先转为二进制
- 二 ↔ 十六：二进制四位一组与十六进制对应

**1.2.3 计算机にの二进制数表示**

- `数值数据`：表示数量大小な数据
- 讨论概念：表数范围、表数精度
	+ `表数范围`：可能な最大最小值
	+ `表数精度`：常为有效数字位数
- 表示
	- `定点小数`：小数点固定在数据某位置
		+ `纯小数`：固定在最高数据位左边
			* 最高位为符号
			* 表数范围，of m+1 个二进制位表示な小数：$|N| \le 1-2^{-m}$
		+ 用于早期计算机，节省硬件
	- `整数`
		+ 带符号，n+1 个二进制位表数范围：$|N| \le 2^{n}-1$
		+ 无符号：$0 \le N \le 2^{n+1}-1$
	- `浮点数`：小数点位置可以移动，
		+ 数学表示 $N = \pm R^E \times M$
			+ M(Mantissa)は`尾数`か`有效数字`，通常纯小数
			+ R（Radix）は阶码の`基数`，表示阶码采用的数制，计算机中一般规定为 2，8，16，与尾数な基数同
			+ E(Exponent)：`阶码`，即指数值，带符号な整数
		+ 另有两个数符表示正负号
			* `阶符` $E_s$
			* `尾符` $M_s$，安排在最高位
		+ 典型计算机表示格式： $M_s E_s E M$
		+ `规格化浮点数` 规定尾数示以纯小数
		+ 表数范围主要决定于阶码，精度于尾数

**1.2.4 二进制编码**

- は字符（包括控制字符）、十进制数都必须储存以二进制码表示なこと
- `二进制编码な十进制数`，か`二-十进制`(`BCD`, Binary Coded Decimal)码
	+ 特点：保留十进制の权，数字则 0 & 1 组合编码表示
	+ 最常用的一种，`8421 码`：
		* 其四位二进制编码每位特定权值
	+ BCD ↔ 十进制：BCD 4 位对应十进制 1 位
	+ 存储方式
		* `压缩的 BCD 码`：一个字节两位 BCD 码
		* `非压缩的 BCD 码` か `扩展 BCD 码`：一个字节一个，高 4 位 0
- 字符の编码：也必须按特定な规则
	+ 最常用は `ASCII 码`
		* 一般规定 7 位二进制编码。字节最高位恒为 0
		* `数据校验码`：一种能发现错误并自动改错的编码方法
			- 最常用は`奇偶校验码`：最高位为奇偶校验位，偶校验は整个字节中 1 的个数为偶数，奇校验は奇数

## 1.3 无符号二进制数的算术运算和逻辑运算

**1.3.1 二进制の算术运算**

- 加法：1+1=0（有进位）
- 减法：0-1=1（有借位）
	+ 例： $11000100B-00100101B=10011111$，看连续借位
- 乘法：竖式类十进制。か移位相加。现在有乘法器。乘2等于左移一位。
- 除法：转换为减法和右移位。或转为十进制短除，或直接短除。处以2相当于右移一位。

**1.3.2 无符号数の表示范围**

$0 \le X \le 2^n-1$

- 溢出：最高有效位向更高位借位、进位则溢出，除数过小也溢出，乘法结果位数加倍无溢出 

**1.3.3 二进制数の逻辑运算**

- 算术运算将数据视为整体，逻辑运算则按位。
- 包括
	+ 与 $\land$
	+ 或 $\lor$
	+ 非 $\overline{sth.}$
	+ 亦或 $\oplus$

**1.3.4 基本逻辑门と常用逻辑部件**

- 与门
- 或门
- 非门
- 与非门 NAND gate
- 或非门 NOR gate
- 译码器：一组输入信号，一个确定的输出信号

## 1.4 有符号二进制数的表示及运算

- `机器数`：符号数值化的数
- 机器数の`真值`：原数值

**1.4.1 有符号数の表示方法**

- 均构成以符号位（1负）と数值部分
	+ `原码`
		* 数值部分は绝对值
		* 0 有 +0 と -0
		* 优点：简单易于理解，乘除规则简单
		* 缺点：加减麻烦
	+ `反码`
		* 负数为对应正数取反
		* 两个 0
		* 运算不方便
	+ `补码`
		* 定义：自同余之概念，对一定的模，负数补码と原码互为补数
			* ~~（同余可理解以钟表）~~
			- だからこそ减法化为加法。在模一定的情况下，加个模结果不变。
			- 因此，负数补码求法：对应正数按位取反加1
				+ 如八位，取反则原本 1 者变0，即，为255（1111 1111）减去原正数
				+ 但同余要求模 256 减去之，故再加 1
				+ （求法也可以视为反码的符号位不变再加 1）
		* 规定 8 位的 1000 0000 为 -128
		* 运算规则
			- $[X+Y]_{补}=[X]_{补}+[Y]_{补}$
			- $[X-Y]_{补}=[X]_{补}-[Y]_{补}=[X]_{补}+[-Y]_{补}$
			- 正の补码按位取反加一=负の补码，再=负の
			- 四则运算中，乘除转化为移位加减，补码使减化为加
		* `自然丢失`：字长 8 位な机器中，第 7 位向上な进位自然丢失，$\not=$ 溢出。
			- ~~（だからこそ用了负数补码后常有第 9 位への进位然不理睬）~~

**1.4.2 补码数与十进制数间の转换**

**1.4.3 补码の运算**

**1.4.4 有符号数の表示范围**

- 溢出判断：
	+ 无符号数判最高位向上进（借）位
	+ 有符号数看次高位与最高位二者，其中 iff 一个向上丶则溢出
		* 如 8 位二进制数表示为：$C_7 \oplus C_6 ==1$
			- $C_i$ 为 $D_i$ 产生的进位

# 2 微处理器与总线

## 2.1 微处理器概述

**2.1.1 运算器**

**2.1.2 控制器**

## 2.2 8088/8086 微处理器

**2.2.1 8088/8086 CPU の特点**

**2.2.2 8088 CPU の外部引脚及其功能**

**2.2.3 8088/8086 CPU の功能结构**

**2.2.4 8088/8086 CPU の存储器组织**

**2.2.4 8088/8086 CPU の工作时序**

## 2.3 80386 微处理器（本课不）

**2.3.1 80386 微处理器の主要特性**

**2.3.2 80386 の内部结构**

**2.3.3 80386 の主要引脚信号**

**2.3.4 80386 の内部寄存器**

**2.3.5 80386 の工作模式**

## 2.4 Pentium 4 微处理器（本课不）

**2.4.1 Pentium 4 微处理器にの新技术**

**2.4.2 Pentium 4 CPU の结构**

**2.4.3 Pentium 4 の存储器管理**

**2.4.4 奔腾 4 の基本执行环境**

## 2.5 总线（本课仅介绍）

**2.5.1 概述**

**2.5.2 总线の基本功能**

**2.5.3 常用系统总线と外设总线标准**

**2.5.4 8088 系统总线**

# 3 8086/8088 指令系统

## 3.1 概述

## 3.2 寻址方式

## 3.3 8086 指令系统

## 3.4 Pentium 新增指令简介

# 4 汇编语言程序设计

## 4.1 汇编语言源程序

## 4.2 伪指令

## 4.3 BIOS 和 DOS 功能调用

## 4.4 汇编语言程序设计基础

# 5 存储器系统

## 5.1 概述

## 5.2 随机存取存储器

## 5.3 只读存储器 ROM

## 5.4 高速缓冲存储器 Cache

## 5.5 半导体存储器设计举例

# 6 输入/输出和中断技术

## 6.1 输入/输出系统概述

## 6.2 简单接口电路

## 6.3 基本输入/输出方式

## 6.4 中断技术

## 6.5 可编程中断控制器

# 7 常用数字接口电路

## 7.1 并行通信与串行通信

## 7.2 可编程定时/计数器 8253

## 7.3 可编程并行接口 8255

## 7.4 可编程串行接口 8250

# 8 模拟量的输入/输出

## 8.1 模拟量的输入/输出通道

## 8.2 D/A 转换器

## 8.3 A/D 转换器
